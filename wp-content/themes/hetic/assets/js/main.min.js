"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Exhibitions=function e(){_classCallCheck(this,e);document.querySelector("#exhibitions")&&new Vue({el:"#exhibitions",data:{years:[],year:"",article:{title:"",content:""},exhibitions:[]},mounted:function(){this.getYears()},methods:{getYears:function(){var e=this,t=new FormData;t.append("action","get_years"),axios.post(""+ajaxurl,t).then(function(t){e.years=t.data,e.setActiveYear(e.years[0].name)}).catch(function(e){console.log(e)})},getExhibitions:function(){var e=this,t=new FormData;t.append("action","get_exhibitions"),t.append("year",this.year),axios.post(""+ajaxurl,t).then(function(t){e.exhibitions=t.data,t.data.length>0?(e.article.title=t.data[0].post_title,e.article.content=t.data[0].content):(e.article.title="",e.article.content="")}).catch(function(e){console.log(e)})},getArticle:function(e){var t=this,i=new FormData;i.append("action","get_exhibition"),i.append("id",e),axios.post(""+ajaxurl,i).then(function(e){t.article.title=e.data.post_title,t.article.content=e.data.content}).catch(function(e){console.log(e)})},setActiveYear:function(e){this.year=e,this.getExhibitions(this.year)}}})},News=function e(){_classCallCheck(this,e);document.querySelector("#news")&&new Vue({el:"#news",data:{categories:[],articles:{},activeCategory:"all",offset:0},mounted:function(){this.getCategories(),this.getArticles("all")},methods:{getCategories:function(){var e=this,t=new FormData;t.append("action","get_news_categories"),axios.post(""+ajaxurl,t).then(function(t){e.categories=t.data}).catch(function(e){console.log(e)})},getArticles:function(e){var t=this;this.activeCategory=e;var i=new FormData;i.append("action","get_news"),i.append("category",e),i.append("offset",this.offset),axios.post(""+ajaxurl,i).then(function(e){t.articles.length>0?e.data.forEach(function(e){t.articles.push(e)}):t.articles=e.data}).catch(function(e){console.log(e)})},changeCategory:function(e){this.articles=[],this.offset=0,this.getArticles(e)},loadMore:function(){this.offset+=8,this.getArticles(this.activeCategory)}}})},_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),Player=function(){function e(t){var i=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_classCallCheck(this,e),this.container=t,this.button_toggle=this.container.querySelector(".section-videos-wrapper-controls--toggle"),this.video=this.container.querySelector(".section-videos-wrapper-video"),this.time_seek_bar=this.container.querySelector(".section-videos-wrapper-controls-seek-bar"),this.time_seek_bar_fill=this.time_seek_bar.querySelector(".section-videos-wrapper-controls-seek-bar--fill"),this.time_drag=!1,this.time_current=this.container.querySelector(".section-videos-wrapper-controls--time-current"),this.time_duration=this.container.querySelector(".section-videos-wrapper-controls--time-duration"),this.button_volume=this.container.querySelector(".section-videos-wrapper-controls-volume--icon"),this.volume_seek_bar=this.container.querySelector(".section-videos-wrapper-controls-volume--bar"),this.volume_seek_bar_fill=this.container.querySelector(".section-videos-wrapper-controls-volume--bar-fill"),this.volume_drag=!1,this.effect_pause=this.container.querySelector(".section-videos-wrapper-effect-pause"),this.effect_play=this.container.querySelector(".section-videos-wrapper-effect-play"),this.button_fullscreen=this.container.querySelector(".section-videos-wrapper-controls--fullscreen"),this.button_toggle.addEventListener("click",function(){i.toggleState()}),this.time_seek_bar.addEventListener("click",function(e){i.time_positions=i.time_seek_bar.getBoundingClientRect(),i.updateTime(e)}),this.time_seek_bar.addEventListener("mousedown",function(){i.time_drag||(i.time_positions=i.time_seek_bar.getBoundingClientRect(),i.time_drag=!0)}),window.addEventListener("mouseup",function(){i.time_drag&&(i.time_drag=!1),i.volume_drag&&(i.volume_drag=!1)}),window.addEventListener("mousemove",function(e){i.time_drag&&i.updateTime(e),i.volume_drag&&i.updateVolume(e)}),this.button_volume.addEventListener("click",function(){i.toggleMute()}),this.volume_seek_bar.addEventListener("click",function(e){i.volume_positions=i.volume_seek_bar.getBoundingClientRect(),i.updateVolume(e)}),this.volume_seek_bar.addEventListener("mousedown",function(){i.volume_drag||(i.volume_positions=i.volume_seek_bar.getBoundingClientRect(),i.volume_drag=!0)}),this.button_fullscreen.addEventListener("click",function(){i.toggleFullscreen()}),this.video.addEventListener("dblclick",function(){i.toggleFullscreen()}),this.video.addEventListener("click",function(){i.toggleState(),i.video.paused?(i.effect_play.classList.add("active"),i.effect_pause.classList.remove("active")):(i.effect_pause.classList.add("active"),i.effect_play.classList.remove("active"))}),this.playlist=s,this.playlist){this.container_playlist=document.querySelector(".section-videos-nav-wrapper-list"),this.playlist_items=document.querySelectorAll(".section-videos-nav-wrapper-list-item"),this.playlist_next=document.querySelector(".section-videos-nav-controls--next"),this.playlist_prev=document.querySelector(".section-videos-nav-controls--prev"),this.playlist_index=0,this.playlist_selected=this.playlist_items[this.playlist_index],this.playlist_item_width=this.playlist_items[0].getBoundingClientRect().width+20,this.video_index=0,this.video_prev=this.container.querySelector(".section-videos-wrapper-controls--skip-prev"),this.video_next=this.container.querySelector(".section-videos-wrapper-controls--skip-next"),this.playlist_next.addEventListener("click",function(){i.playlist_index<i.playlist_items.length-i.playlist_size&&(i.playlist_index++,i.updatePlaylist())}),this.playlist_prev.addEventListener("click",function(){i.playlist_index>0&&(i.playlist_index--,i.updatePlaylist())});for(var n=function(){var e=i;i.playlist_items[l].addEventListener("click",function(){this!=e.playlist_selected&&(e.video_index=Array.prototype.indexOf.call(e.playlist_items,this),e.selectVideo())})},l=0;l<this.playlist_items.length;l++)n();this.video_prev.addEventListener("click",function(){i.video_index>0?(i.video_index--,i.selectVideo()):(i.video_prev.classList.add("hide"),console.log("nop prev")),i.video_next.classList.remove("hide")}),this.video_next.addEventListener("click",function(){i.video_index<i.playlist_items.length-1?(i.video_index++,i.selectVideo()):(i.video_next.classList.add("hide"),console.log("nop next")),i.video_prev.classList.remove("hide")}),this.video.addEventListener("ended",function(){i.video_index<i.playlist_items.length-1&&(i.video_index++,i.selectVideo())}),this.initPlaylist()}window.addEventListener("resize",function(){i.playlist_item_width=i.playlist_items[0].getBoundingClientRect().width+20,i.playlist&&(console.log("resize"),i.initPlaylist())}),this.init()}return _createClass(e,[{key:"init",value:function(){var e=this;this.container.classList.remove("playing"),this.effect_pause.classList.remove("active"),this.effect_play.classList.remove("active"),this.video.addEventListener("loadeddata",function(){e.video.currentTime=.45,e.time_duration.textContent=e.formatTime(e.video.duration),e.time_current.textContent=e.formatTime(e.video.currentTime),e.time_seek_bar_fill.style.transform="scaleX(0)"})}},{key:"initPlaylist",value:function(){var e=window.innerWidth;this.playlist_size=e<425?1:e<650?2:e<900?3:e<1300?5:e<2500?6:9,this.playlist_index=0,this.updatePlaylist()}},{key:"toggleState",value:function(){this.video.paused?(this.video.play(),this.container.classList.add("playing"),this.render()):(this.video.pause(),this.container.classList.remove("playing")),this.effect_pause.classList.remove("active"),this.effect_play.classList.remove("active")}},{key:"updateTime",value:function(e){var t=(e.pageX-this.time_positions.left)/this.time_positions.width;t>=0&&t<1&&(this.time_seek_bar_fill.style.transform="scaleX("+t+")",this.video.currentTime=t*this.video.duration,this.time_current.textContent=this.formatTime(this.video.currentTime))}},{key:"updateVolume",value:function(e){var t=(e.pageX-this.volume_positions.left)/this.volume_positions.width;t>=0&&t<1&&(this.video.volume=t,this.volume_seek_bar_fill.style.transform="scaleX("+t+")",this.video.muted&&this.toggleMute(),t>=.5?(this.button_volume.classList.add("volume-2"),this.button_volume.classList.remove("volume-1"),this.button_volume.classList.remove("volume-0")):t<.5&&t>=.25?(this.button_volume.classList.remove("volume-2"),this.button_volume.classList.add("volume-1"),this.button_volume.classList.remove("volume-0")):t<.25?(this.button_volume.classList.remove("volume-2"),this.button_volume.classList.remove("volume-1"),this.button_volume.classList.add("volume-0")):t<=0&&(this.button_volume.classList.remove("volume-2"),this.button_volume.classList.remove("volume-1"),this.button_volume.classList.remove("volume-0"),this.toggleMute()))}},{key:"toggleMute",value:function(){this.video.muted?(this.video.muted=!1,this.button_volume.classList.remove("mute"),this.volume_seek_bar_fill.style.transform="scaleX("+this.video.volume+")"):(this.video.muted=!0,this.button_volume.classList.add("mute"),this.volume_seek_bar_fill.style.transform="scaleX(0)")}},{key:"toggleFullscreen",value:function(){null==document.fullscreenElement&&null==document.mozFullscreenElement&&null==document.webkitFullscreenElement&&null==document.msFullscreenElement?this.container.requestFullscreen?this.container.requestFullscreen():this.container.mozRequestFullScreen?this.container.mozRequestFullScreen():this.container.webkitRequestFullscreen?this.container.webkitRequestFullscreen():this.container.msRequestFullscreen&&this.container.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"updatePlaylist",value:function(){this.container_playlist.style.transform="translateX(-"+this.playlist_index*this.playlist_item_width+"px)",0==this.playlist_index?this.playlist_prev.classList.add("hide"):this.playlist_prev.classList.remove("hide"),this.playlist_index>=this.playlist_items.length-this.playlist_size?this.playlist_next.classList.add("hide"):this.playlist_next.classList.remove("hide")}},{key:"selectVideo",value:function(){this.playlist_selected.classList.remove("active"),this.playlist_selected=this.playlist_items[this.video_index],this.playlist_selected.classList.add("active"),this.video.src=this.playlist_selected.dataset.target,this.init(),this.video_index>this.playlist_index+this.playlist_size-1?(this.playlist_index++,this.updatePlaylist()):this.video_index<this.playlist_index&&(this.playlist_index--,this.updatePlaylist()),0==this.video_index?this.video_prev.classList.add("hide"):this.video_prev.classList.remove("hide"),this.video_index>=this.playlist_items.length-1?this.video_next.classList.add("hide"):this.video_next.classList.remove("hide")}},{key:"render",value:function(){this.video.paused||window.requestAnimationFrame(this.render.bind(this));var e=this.video.currentTime/this.video.duration;this.time_seek_bar_fill.style.transform="scaleX("+e+")",this.time_current.textContent=this.formatTime(this.video.currentTime),this.video.currentTime==this.video.duration&&this.container.classList.remove("playing")}},{key:"formatTime",value:function(e){e=Math.round(e);var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),s=e-3600*t-60*i;return t=t<10?"0"+t:t,i=i<10?"0"+i:i,s=s<10?"0"+s:s,0!=t?t+":"+i+":"+s:i+":"+s}}]),e}(),_createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),Slider=function(){function e(t){var i=this;_classCallCheck(this,e),this.container=t,this.items=this.container.querySelectorAll(".slider-item"),this.button_next=this.container.querySelector(".slider-next"),this.button_prev=this.container.querySelector(".slider-prev"),this.timer_fill=this.container.querySelector(".slider-timer-fill"),this.text_current=this.container.querySelector(".slider-index-current"),this.text_total=this.container.querySelector(".slider-index-total"),this.index=0,this.stacking=1,this.last_index=0,this.slide_interval=4e3,this.last_update=0,this.need_update=!0,this.draw=!0,this.init(),this.render(),this.startInterval(),this.button_next.addEventListener("click",function(){i.clicked||(i.index<i.items.length-1?i.index++:i.index=0,i.update())}),this.button_prev.addEventListener("click",function(){i.clicked||(i.index>0?i.index--:i.index=i.items.length-1,i.update())})}return _createClass(e,[{key:"startInterval",value:function(){var e=this;this.interval=setTimeout(function(){e.button_next.click(),e.startInterval()},this.slide_interval)}},{key:"init",value:function(){this.text_total.textContent=this.items.length>9?this.items.length:"0"+this.items.length,this.index=0,this.items[this.index].classList.add("active"),this.text_current.textContent=this.index+1>9?this.index+1:"0"+(this.index+1)}},{key:"update",value:function(){var e=this;this.text_total.textContent=this.items.length>9?this.items.length:"0"+this.items.length,this.text_current.textContent=this.index+1>9?this.index+1:"0"+(this.index+1),this.items[this.index].style.zIndex=this.stacking++,this.items[this.index].classList.add("active"),this.clicked=!0,this.draw=!1,this.timer_fill.classList.add("fill"),setTimeout(function(){e.items[e.last_index].classList.remove("active"),e.last_index=e.index,e.clicked=!1,clearTimeout(e.interval),e.startInterval(),e.timer_fill.classList.remove("fill"),e.need_update=!0,e.draw=!0},610)}},{key:"render",value:function(e){if((this.need_update||void 0===this.last_update||void 0===e)&&(this.last_update=e,this.need_update=!1),(e-this.last_update)/this.slide_interval>=1){var t=(e-this.last_update)/this.slide_interval;this.timer_fill.style.transform="scaleX("+t+")",this.last_update=e}if(this.draw){var i=(e-this.last_update)/this.slide_interval;this.timer_fill.style.transform="scaleX("+i+")"}else this.timer_fill.style.transform=null;window.requestAnimationFrame(this.render.bind(this))}}]),e}(),burger_button=document.querySelector(".header-burger"),burger_nav=document.querySelector(".header-nav");burger_button.addEventListener("click",function(){burger_button.classList.toggle("header-burger-active"),burger_nav.classList.toggle("header-nav-expand")});var header=document.querySelector(".header"),header_hide=!1;document.body.addEventListener("mousewheel",function(e){!header_hide&&e.deltaY<0&&!scroll_disabled?(header.classList.remove("hide"),header_hide=!0):header_hide&&e.deltaY>0&&document.body.scrollTop>80&&!scroll_disabled&&(header.classList.add("hide"),header_hide=!1)});for(var disabled_elements=document.querySelectorAll(".scroll-disable"),scroll_disabled=!1,i=0;i<disabled_elements.length;i++)disabled_elements[i].addEventListener("mouseenter",function(){scroll_disabled=!0}),disabled_elements[i].addEventListener("mouseleave",function(){scroll_disabled=!1});if(void 0!=document.querySelector(".section-exhibitions")){!function(){var e=document.querySelectorAll(".section-exhibitions-container-slider-nav-list--item"),t=document.querySelector(".section-exhibitions-container-slider-nav-list"),s=document.querySelector(".section-exhibitions-container-slider-wrapper-list"),n=document.querySelector(".section-exhibitions-container-content-wrapper-list"),l=0;for(i=0;i<e.length;i++)e[i].addEventListener("click",function(){var i=Array.prototype.indexOf.call(e,this);void 0!=e[l]&&e[l].classList.remove("active"),l=i,e[i].classList.add("active"),window.innerWidth>=900?(s.style.transform="translateX(-"+100*i+"%)",n.style.transform="translateX(-"+100*i+"%)"):(s.style.transform="translateX(-"+100*i+"%)",n.style.transform="translateX(-"+100*i+"%)",t.style.transform="translateX(-"+(i-1)/3*100+"%)")})}()}if(void 0!=document.querySelector(".section-videos-wrapper"))var player=new Player(document.querySelector(".section-videos-wrapper"),!0);if(void 0!=document.querySelector(".slider"))var slider=new Slider(document.querySelector(".slider"));if(void 0!=document.querySelector("#instagramDate")){var instagramDate=document.querySelector("#instagramDate"),d=instagramDate.getAttribute("datetime");instagramDate.innerText=moment(d).format("DD MMMM YYYY")}new Exhibitions,new News;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkV4aGliaXRpb25zLmpzIiwiTmV3cy5qcyIsIlBsYXllci5qcyIsIlNsaWRlci5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiRXhoaWJpdGlvbnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiVnVlIiwiZWwiLCJkYXRhIiwieWVhcnMiLCJ5ZWFyIiwiYXJ0aWNsZSIsInRpdGxlIiwiY29udGVudCIsImV4aGliaXRpb25zIiwibW91bnRlZCIsImdldFllYXJzIiwibWV0aG9kcyIsIl90aGlzIiwiZm9ybV9kYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJheGlvcyIsInBvc3QiLCJhamF4dXJsIiwidGhlbiIsInJlcyIsInNldEFjdGl2ZVllYXIiLCJuYW1lIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZ2V0RXhoaWJpdGlvbnMiLCJfdGhpczIiLCJsZW5ndGgiLCJwb3N0X3RpdGxlIiwiZ2V0QXJ0aWNsZSIsInBvc3RJZCIsIl90aGlzMyIsIk5ld3MiLCJjYXRlZ29yaWVzIiwiYXJ0aWNsZXMiLCJhY3RpdmVDYXRlZ29yeSIsIm9mZnNldCIsImdldENhdGVnb3JpZXMiLCJnZXRBcnRpY2xlcyIsImNhdGVnb3J5IiwiZm9yRWFjaCIsImUiLCJwdXNoIiwiY2hhbmdlQ2F0ZWdvcnkiLCJsb2FkTW9yZSIsIlBsYXllciIsImNvbnRhaW5lciIsInBsYXlsaXN0IiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiYnV0dG9uX3RvZ2dsZSIsInZpZGVvIiwidGltZV9zZWVrX2JhciIsInRpbWVfc2Vla19iYXJfZmlsbCIsInRpbWVfZHJhZyIsInRpbWVfY3VycmVudCIsInRpbWVfZHVyYXRpb24iLCJidXR0b25fdm9sdW1lIiwidm9sdW1lX3NlZWtfYmFyIiwidm9sdW1lX3NlZWtfYmFyX2ZpbGwiLCJ2b2x1bWVfZHJhZyIsImVmZmVjdF9wYXVzZSIsImVmZmVjdF9wbGF5IiwiYnV0dG9uX2Z1bGxzY3JlZW4iLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlU3RhdGUiLCJ0aW1lX3Bvc2l0aW9ucyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInVwZGF0ZVRpbWUiLCJ3aW5kb3ciLCJ1cGRhdGVWb2x1bWUiLCJ0b2dnbGVNdXRlIiwidm9sdW1lX3Bvc2l0aW9ucyIsInRvZ2dsZUZ1bGxzY3JlZW4iLCJwYXVzZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJjb250YWluZXJfcGxheWxpc3QiLCJwbGF5bGlzdF9pdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwbGF5bGlzdF9uZXh0IiwicGxheWxpc3RfcHJldiIsInBsYXlsaXN0X2luZGV4IiwicGxheWxpc3Rfc2VsZWN0ZWQiLCJwbGF5bGlzdF9pdGVtX3dpZHRoIiwid2lkdGgiLCJ2aWRlb19pbmRleCIsInZpZGVvX3ByZXYiLCJ2aWRlb19uZXh0IiwicGxheWxpc3Rfc2l6ZSIsInVwZGF0ZVBsYXlsaXN0IiwiX2xvb3AiLCJzZWxmIiwiaSIsIkFycmF5IiwicHJvdG90eXBlIiwiaW5kZXhPZiIsImNhbGwiLCJzZWxlY3RWaWRlbyIsImluaXRQbGF5bGlzdCIsImluaXQiLCJjdXJyZW50VGltZSIsInRleHRDb250ZW50IiwiZm9ybWF0VGltZSIsImR1cmF0aW9uIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJpbm5lcldpZHRoIiwicGxheSIsInJlbmRlciIsInBhdXNlIiwicmF0aW8iLCJwYWdlWCIsImxlZnQiLCJ2b2x1bWUiLCJtdXRlZCIsImZ1bGxzY3JlZW5FbGVtZW50IiwibW96RnVsbHNjcmVlbkVsZW1lbnQiLCJ3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCIsIm1zRnVsbHNjcmVlbkVsZW1lbnQiLCJyZXF1ZXN0RnVsbHNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4iLCJtc1JlcXVlc3RGdWxsc2NyZWVuIiwiZXhpdEZ1bGxzY3JlZW4iLCJtb3pFeGl0RnVsbFNjcmVlbiIsIndlYmtpdEV4aXRGdWxsc2NyZWVuIiwibXNFeGl0RnVsbHNjcmVlbiIsInNyYyIsImRhdGFzZXQiLCJ0YXJnZXQiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwidGltZSIsIk1hdGgiLCJyb3VuZCIsImhvdXJzIiwiZmxvb3IiLCJtaW51dGVzIiwic2Vjb25kcyIsIlNsaWRlciIsIml0ZW1zIiwiYnV0dG9uX25leHQiLCJidXR0b25fcHJldiIsInRpbWVyX2ZpbGwiLCJ0ZXh0X2N1cnJlbnQiLCJ0ZXh0X3RvdGFsIiwiaW5kZXgiLCJzdGFja2luZyIsImxhc3RfaW5kZXgiLCJzbGlkZV9pbnRlcnZhbCIsImxhc3RfdXBkYXRlIiwibmVlZF91cGRhdGUiLCJkcmF3Iiwic3RhcnRJbnRlcnZhbCIsImNsaWNrZWQiLCJ1cGRhdGUiLCJpbnRlcnZhbCIsInNldFRpbWVvdXQiLCJjbGljayIsInpJbmRleCIsImNsZWFyVGltZW91dCIsImJ1cmdlcl9idXR0b24iLCJidXJnZXJfbmF2IiwidG9nZ2xlIiwiaGVhZGVyIiwiaGVhZGVyX2hpZGUiLCJib2R5IiwiZGVsdGFZIiwic2Nyb2xsX2Rpc2FibGVkIiwic2Nyb2xsVG9wIiwiZGlzYWJsZWRfZWxlbWVudHMiLCJleGhpYml0aW9uc19idXR0b25zX2l0ZW0iLCJleGhpYml0aW9uc19idXR0b25zX2NvbnRhaW5lciIsImV4aGliaXRpb25zX2xpc3RfaW1nIiwiZXhoaWJpdGlvbnNfbGlzdF9jb250ZW50IiwiZXhoaWJpdGlvbnNfbGFzdF9pbmRleCIsInBsYXllciIsInNsaWRlciIsImluc3RhZ3JhbURhdGUiLCJkIiwiZ2V0QXR0cmlidXRlIiwiaW5uZXJUZXh0IiwibW9tZW50IiwiZm9ybWF0Il0sIm1hcHBpbmdzIjoiaWNBQU1BLFlBQ0osU0FBQUEsSUFBZUMsZ0JBQUFDLEtBQUFGLEdBQ09HLFNBQVNDLGNBQWMsaUJBRXpDLElBQUlDLEtBQ0ZDLEdBQUksZUFDSkMsTUFDRUMsU0FDQUMsS0FBTSxHQUNOQyxTQUNFQyxNQUFPLEdBQ1BDLFFBQVMsSUFFWEMs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RixFQUFRckQsTUFBTUMsVUFBVUMsUUFBUUMsS0FBSzJFLEVBQTBCbEwsV0FFWHNELEdBQXBENEgsRUFBeUJJLElBQzNCSixFQUF5QkksR0FBd0J0RyxVQUFVRSxPQUFPLFVBRXBFb0csRUFBeUI3QixFQUV6QnlCLEVBQXlCekIsR0FBT3pFLFVBQVVDLElBQUksVUFFMUNQLE9BQU91QyxZQUFjLEtBQ3ZCbUUsRUFBcUJyRSxNQUFNQyxVQUFZLGVBQTBCLElBQVJ5QyxFQUFlLEtBQ3hFNEIsRUFBeUJ0RSxNQUFNQyxVQUFZLGVBQTBCLElBQVJ5QyxFQUFlLE9BRzVFMkIsRUFBcUJyRSxNQUFNQyxVQUFZLGVBQTBCLElBQVJ5QyxFQUFlLEtBQ3hFNEIsRUFBeUJ0RSxNQUFNQyxVQUFZLGVBQTBCLElBQVJ5QyxFQUFlLEtBQzVFMEIsRUFBOEJwRSxNQUFNQyxVQUFZLGdCQUFvQnlDLEVBQVEsR0FBSyxFQUFLLElBQU8sUUF6QnBDLEdBZ0NqRSxRQUF5RG5HLEdBQXJEckQsU0FBU0MsY0FBYywyQkFDekIsSUFBTXFMLE9BQVMsSUFBSXJJLE9BQU9qRCxTQUFTQyxjQUFjLDRCQUE0QixHQUkvRSxRQUF5Q29ELEdBQXJDckQsU0FBU0MsY0FBYyxXQUN6QixJQUFNc0wsT0FBUyxJQUFJdEMsT0FBT2pKLFNBQVNDLGNBQWMsWUFHbkQsUUFBZ0RvRCxHQUE1Q3JELFNBQVNDLGNBQWMsa0JBQWdDLENBQ3pELElBQUl1TCxjQUFnQnhMLFNBQVNDLGNBQWMsa0JBQ3JDd0wsRUFBSUQsY0FBY0UsYUFBYSxZQUNyQ0YsY0FBY0csVUFBWUMsT0FBT0gsR0FBR0ksT0FBTyxnQkFFN0MsSUFBSWhNLFlBQ0osSUFBSXVDIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgRXhoaWJpdGlvbnMge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgY29uc3QgZXhoaWJpdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhoaWJpdGlvbnMnKVxuICAgIGlmIChleGhpYml0aW9ucykge1xuICAgICAgbmV3IFZ1ZSh7XG4gICAgICAgIGVsOiAnI2V4aGliaXRpb25zJyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHllYXJzOiBbXSxcbiAgICAgICAgICB5ZWFyOiAnJyxcbiAgICAgICAgICBhcnRpY2xlOiB7XG4gICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICBjb250ZW50OiAnJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXhoaWJpdGlvbnM6IFtdLFxuICAgICAgICB9LFxuICAgICAgICBtb3VudGVkICgpIHtcbiAgICAgICAgICB0aGlzLmdldFllYXJzKClcbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kczoge1xuICAgICAgICAgIGdldFllYXJzICgpIHtcbiAgICAgICAgICAgIGxldCBmb3JtX2RhdGEgPSBuZXcgRm9ybURhdGFcbiAgICAgICAgICAgIGZvcm1fZGF0YS5hcHBlbmQoJ2FjdGlvbicsICdnZXRfeWVhcnMnKVxuICAgICAgICAgICAgYXhpb3MucG9zdChgJHthamF4dXJsfWAsIGZvcm1fZGF0YSkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnllYXJzID0gcmVzLmRhdGFcbiAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVZZWFyKHRoaXMueWVhcnNbMF0ubmFtZSlcbiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXRFeGhpYml0aW9ucyAoKSB7XG4gICAgICAgICAgICBsZXQgZm9ybV9kYXRhID0gbmV3IEZvcm1EYXRhXG4gICAgICAgICAgICBmb3JtX2RhdGEuYXBwZW5kKCdhY3Rpb24nLCAnZ2V0X2V4aGliaXRpb25zJylcbiAgICAgICAgICAgIGZvcm1fZGF0YS5hcHBlbmQoJ3llYXInLCB0aGlzLnllYXIpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF4aW9zLnBvc3QoYCR7YWpheHVybH1gLCBmb3JtX2RhdGEpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5leGhpYml0aW9ucyA9IHJlcy5kYXRhXG4gICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcnRpY2xlLnRpdGxlID0gcmVzLmRhdGFbMF0ucG9zdF90aXRsZVxuICAgICAgICAgICAgICAgIHRoaXMuYXJ0aWNsZS5jb250ZW50ID0gcmVzLmRhdGFbMF0uY29udGVudFxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYXJ0aWNsZS50aXRsZSA9ICcnXG4gICAgICAgICAgICAgICAgdGhpcy5hcnRpY2xlLmNvbnRlbnQgPSAnJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZ2V0QXJ0aWNsZSAocG9zdElkKSB7XG4gICAgICAgICAgICBsZXQgZm9ybV9kYXRhID0gbmV3IEZvcm1EYXRhXG4gICAgICAgICAgICBmb3JtX2RhdGEuYXBwZW5kKCdhY3Rpb24nLCAnZ2V0X2V4aGliaXRpb24nKVxuICAgICAgICAgICAgZm9ybV9kYXRhLmFwcGVuZCgnaWQnLCBwb3N0SWQpXG4gICAgICAgICAgICBheGlvcy5wb3N0KGAke2FqYXh1cmx9YCwgZm9ybV9kYXRhKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuYXJ0aWNsZS50aXRsZSA9IHJlcy5kYXRhLnBvc3RfdGl0bGVcbiAgICAgICAgICAgICAgdGhpcy5hcnRpY2xlLmNvbnRlbnQgPSByZXMuZGF0YS5jb250ZW50XG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0QWN0aXZlWWVhciAoeWVhcikge1xuICAgICAgICAgICAgdGhpcy55ZWFyID0geWVhclxuICAgICAgICAgICAgdGhpcy5nZXRFeGhpYml0aW9ucyh0aGlzLnllYXIpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufSIsImNsYXNzIE5ld3Mge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgY29uc3QgbmV3cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdzJylcbiAgICBpZiAobmV3cykge1xuICAgICAgbmV3IFZ1ZSh7XG4gICAgICAgIGVsOiAnI25ld3MnLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY2F0ZWdvcmllczogW10sXG4gICAgICAgICAgYXJ0aWNsZXM6IHt9LFxuICAgICAgICAgIGFjdGl2ZUNhdGVnb3J5OiAnYWxsJyxcbiAgICAgICAgICBvZmZzZXQ6IDBcbiAgICAgICAgfSxcbiAgICAgICAgbW91bnRlZCAoKSB7XG4gICAgICAgICAgdGhpcy5nZXRDYXRlZ29yaWVzKClcbiAgICAgICAgICB0aGlzLmdldEFydGljbGVzKCdhbGwnKVxuICAgICAgICB9LFxuICAgICAgICBtZXRob2RzOiB7XG4gICAgICAgICAgZ2V0Q2F0ZWdvcmllcyAoKSB7XG4gICAgICAgICAgICBsZXQgZm9ybV9kYXRhID0gbmV3IEZvcm1EYXRhXG4gICAgICAgICAgICBmb3JtX2RhdGEuYXBwZW5kKCdhY3Rpb24nLCAnZ2V0X25ld3NfY2F0ZWdvcmllcycpXG4gICAgICAgICAgICBheGlvcy5wb3N0KGAke2FqYXh1cmx9YCwgZm9ybV9kYXRhKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHJlcy5kYXRhXG4gICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZ2V0QXJ0aWNsZXMgKGNhdGVnb3J5KSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUNhdGVnb3J5ID0gY2F0ZWdvcnlcbiAgICAgICAgICAgIGxldCBmb3JtX2RhdGEgPSBuZXcgRm9ybURhdGFcbiAgICAgICAgICAgIGZvcm1fZGF0YS5hcHBlbmQoJ2FjdGlvbicsICdnZXRfbmV3cycpXG4gICAgICAgICAgICBmb3JtX2RhdGEuYXBwZW5kKCdjYXRlZ29yeScsIGNhdGVnb3J5KVxuICAgICAgICAgICAgZm9ybV9kYXRhLmFwcGVuZCgnb2Zmc2V0JywgdGhpcy5vZmZzZXQpXG4gICAgICAgICAgICBheGlvcy5wb3N0KGAke2FqYXh1cmx9YCwgZm9ybV9kYXRhKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmFydGljbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy5hcnRpY2xlcy5wdXNoKGUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFydGljbGVzID0gcmVzLmRhdGFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNoYW5nZUNhdGVnb3J5IChjYXRlZ29yeSkge1xuICAgICAgICAgICAgdGhpcy5hcnRpY2xlcyA9IFtdXG4gICAgICAgICAgICB0aGlzLm9mZnNldCA9IDBcbiAgICAgICAgICAgIHRoaXMuZ2V0QXJ0aWNsZXMoY2F0ZWdvcnkpXG4gICAgICAgICAgICBcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxvYWRNb3JlICgpIHtcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0ICs9IDhcbiAgICAgICAgICAgIHRoaXMuZ2V0QXJ0aWNsZXModGhpcy5hY3RpdmVDYXRlZ29yeSlcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufSIsIlxuY2xhc3MgUGxheWVye1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIHBsYXlsaXN0ID0gZmFsc2Upe1xuICAgIHRoaXMuY29udGFpbmVyICAgICA9IGNvbnRhaW5lclxuICAgIHRoaXMuYnV0dG9uX3RvZ2dsZSA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy13cmFwcGVyLWNvbnRyb2xzLS10b2dnbGUnKVxuICAgIHRoaXMudmlkZW8gICAgICAgICA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy13cmFwcGVyLXZpZGVvJylcbiAgICBcbiAgICB0aGlzLnRpbWVfc2Vla19iYXIgICAgICA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy13cmFwcGVyLWNvbnRyb2xzLXNlZWstYmFyJylcbiAgICB0aGlzLnRpbWVfc2Vla19iYXJfZmlsbCA9IHRoaXMudGltZV9zZWVrX2Jhci5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi12aWRlb3Mtd3JhcHBlci1jb250cm9scy1zZWVrLWJhci0tZmlsbCcpXG4gICAgdGhpcy50aW1lX2RyYWcgICAgICAgICAgPSBmYWxzZVxuICAgIFxuICAgIHRoaXMudGltZV9jdXJyZW50ICA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy13cmFwcGVyLWNvbnRyb2xzLS10aW1lLWN1cnJlbnQnKVxuICAgIHRoaXMudGltZV9kdXJhdGlvbiA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy13cmFwcGVyLWNvbnRyb2xzLS10aW1lLWR1cmF0aW9uJylcbiAgICBcbiAgICB0aGlzLmJ1dHRvbl92b2x1bWUgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi12aWRlb3Mtd3JhcHBlci1jb250cm9scy12b2x1bWUtLWljb24nKVxuICAgIHRoaXMudm9sdW1lX3NlZWtfYmFyICAgICAgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi12aWRlb3Mtd3JhcHBlci1jb250cm9scy12b2x1bWUtLWJhcicpXG4gICAgdGhpcy52b2x1bWVfc2Vla19iYXJfZmlsbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy13cmFwcGVyLWNvbnRyb2xzLXZvbHVtZS0tYmFyLWZpbGwnKVxuICAgIHRoaXMudm9sdW1lX2RyYWcgPSBmYWxzZVxuICAgIFxuICAgIHRoaXMuZWZmZWN0X3BhdXNlID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tdmlkZW9zLXdyYXBwZXItZWZmZWN0LXBhdXNlJylcbiAgICB0aGlzLmVmZmVjdF9wbGF5ICA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy13cmFwcGVyLWVmZmVjdC1wbGF5JylcbiAgICBcbiAgICB0aGlzLmJ1dHRvbl9mdWxsc2NyZWVuID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tdmlkZW9zLXdyYXBwZXItY29udHJvbHMtLWZ1bGxzY3JlZW4nKVxuICAgIFxuICAgIHRoaXMuYnV0dG9uX3RvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlKClcbiAgICB9KVxuICAgIFxuICAgIHRoaXMudGltZV9zZWVrX2Jhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKT0+e1xuICAgICAgdGhpcy50aW1lX3Bvc2l0aW9ucyA9IHRoaXMudGltZV9zZWVrX2Jhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgXG4gICAgICB0aGlzLnVwZGF0ZVRpbWUoZSlcbiAgICB9KVxuICAgIFxuICAgIHRoaXMudGltZV9zZWVrX2Jhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoKT0+e1xuICAgICAgaWYoIXRoaXMudGltZV9kcmFnKXtcbiAgICAgICAgdGhpcy50aW1lX3Bvc2l0aW9ucyA9IHRoaXMudGltZV9zZWVrX2Jhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgICB0aGlzLnRpbWVfZHJhZyA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCk9PntcbiAgICAgIGlmKHRoaXMudGltZV9kcmFnKXtcbiAgICAgICAgdGhpcy50aW1lX2RyYWcgPSBmYWxzZVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZih0aGlzLnZvbHVtZV9kcmFnKXtcbiAgICAgICAgdGhpcy52b2x1bWVfZHJhZyA9IGZhbHNlXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpPT57XG4gICAgICBpZih0aGlzLnRpbWVfZHJhZyl7XG4gICAgICAgIHRoaXMudXBkYXRlVGltZShlKVxuICAgICAgfVxuICAgICAgaWYodGhpcy52b2x1bWVfZHJhZyl7XG4gICAgICAgIHRoaXMudXBkYXRlVm9sdW1lKGUpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmJ1dHRvbl92b2x1bWUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PntcbiAgICAgIHRoaXMudG9nZ2xlTXV0ZSgpXG4gICAgfSlcbiAgICBcbiAgICB0aGlzLnZvbHVtZV9zZWVrX2Jhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PntcbiAgICAgIHRoaXMudm9sdW1lX3Bvc2l0aW9ucyA9IHRoaXMudm9sdW1lX3NlZWtfYmFyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICB0aGlzLnVwZGF0ZVZvbHVtZShlKVxuICAgIH0pXG4gICAgXG4gICAgdGhpcy52b2x1bWVfc2Vla19iYXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKCk9PntcbiAgICAgIGlmKCF0aGlzLnZvbHVtZV9kcmFnKXtcbiAgICAgICAgdGhpcy52b2x1bWVfcG9zaXRpb25zID0gdGhpcy52b2x1bWVfc2Vla19iYXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgICAgdGhpcy52b2x1bWVfZHJhZyA9IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMuYnV0dG9uX2Z1bGxzY3JlZW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgdGhpcy50b2dnbGVGdWxsc2NyZWVuKClcbiAgICB9KVxuICAgIFxuICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCAoKT0+e1xuICAgICAgdGhpcy50b2dnbGVGdWxsc2NyZWVuKClcbiAgICB9KVxuICAgIFxuICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgdGhpcy50b2dnbGVTdGF0ZSgpXG4gICAgICBpZih0aGlzLnZpZGVvLnBhdXNlZCl7XG4gICAgICAgIHRoaXMuZWZmZWN0X3BsYXkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgdGhpcy5lZmZlY3RfcGF1c2UuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIHRoaXMuZWZmZWN0X3BhdXNlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICAgIHRoaXMuZWZmZWN0X3BsYXkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMucGxheWxpc3QgPSBwbGF5bGlzdFxuICAgIGlmKHRoaXMucGxheWxpc3Qpe1xuICAgICAgdGhpcy5jb250YWluZXJfcGxheWxpc3QgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tdmlkZW9zLW5hdi13cmFwcGVyLWxpc3QnKVxuICAgICAgdGhpcy5wbGF5bGlzdF9pdGVtcyAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24tdmlkZW9zLW5hdi13cmFwcGVyLWxpc3QtaXRlbScpXG4gICAgICB0aGlzLnBsYXlsaXN0X25leHQgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi12aWRlb3MtbmF2LWNvbnRyb2xzLS1uZXh0JylcbiAgICAgIHRoaXMucGxheWxpc3RfcHJldiAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy1uYXYtY29udHJvbHMtLXByZXYnKVxuICAgICAgdGhpcy5wbGF5bGlzdF9pbmRleCAgICAgID0gMFxuICAgICAgdGhpcy5wbGF5bGlzdF9zZWxlY3RlZCAgID0gdGhpcy5wbGF5bGlzdF9pdGVtc1t0aGlzLnBsYXlsaXN0X2luZGV4XVxuICAgICAgdGhpcy5wbGF5bGlzdF9pdGVtX3dpZHRoID0gdGhpcy5wbGF5bGlzdF9pdGVtc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCArIDIwXG4gICAgICBcbiAgICAgIHRoaXMudmlkZW9faW5kZXggICA9IDBcbiAgICAgIHRoaXMudmlkZW9fcHJldiAgICA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy13cmFwcGVyLWNvbnRyb2xzLS1za2lwLXByZXYnKVxuICAgICAgdGhpcy52aWRlb19uZXh0ICAgID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tdmlkZW9zLXdyYXBwZXItY29udHJvbHMtLXNraXAtbmV4dCcpXG4gICAgICBcbiAgICAgIHRoaXMucGxheWxpc3RfbmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgIGlmKHRoaXMucGxheWxpc3RfaW5kZXggPCB0aGlzLnBsYXlsaXN0X2l0ZW1zLmxlbmd0aCAtIHRoaXMucGxheWxpc3Rfc2l6ZSl7XG4gICAgICAgICAgdGhpcy5wbGF5bGlzdF9pbmRleCsrXG4gICAgICAgICAgdGhpcy51cGRhdGVQbGF5bGlzdCgpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHRoaXMucGxheWxpc3RfcHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XG4gICAgICAgIGlmKHRoaXMucGxheWxpc3RfaW5kZXggPiAwKXtcbiAgICAgICAgICB0aGlzLnBsYXlsaXN0X2luZGV4LS1cbiAgICAgICAgICB0aGlzLnVwZGF0ZVBsYXlsaXN0KClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBsYXlsaXN0X2l0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzXG4gICAgICAgIHRoaXMucGxheWxpc3RfaXRlbXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgIGlmKHRoaXMgIT0gc2VsZi5wbGF5bGlzdF9zZWxlY3RlZCl7XG4gICAgICAgICAgICBzZWxmLnZpZGVvX2luZGV4ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChzZWxmLnBsYXlsaXN0X2l0ZW1zLCB0aGlzKVxuICAgICAgICAgICAgc2VsZi5zZWxlY3RWaWRlbygpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLnZpZGVvX3ByZXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICBpZih0aGlzLnZpZGVvX2luZGV4ID4gMCl7XG4gICAgICAgICAgdGhpcy52aWRlb19pbmRleC0tXG4gICAgICAgICAgdGhpcy5zZWxlY3RWaWRlbygpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICB0aGlzLnZpZGVvX3ByZXYuY2xhc3NMaXN0LmFkZCgnaGlkZScpXG4gICAgICAgICAgY29uc29sZS5sb2coJ25vcCBwcmV2JylcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZpZGVvX25leHQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpXG4gICAgICB9KVxuICAgICAgXG4gICAgICB0aGlzLnZpZGVvX25leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgICBpZih0aGlzLnZpZGVvX2luZGV4IDwgdGhpcy5wbGF5bGlzdF9pdGVtcy5sZW5ndGggLSAxKXtcbiAgICAgICAgICB0aGlzLnZpZGVvX2luZGV4KytcbiAgICAgICAgICB0aGlzLnNlbGVjdFZpZGVvKClcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgIHRoaXMudmlkZW9fbmV4dC5jbGFzc0xpc3QuYWRkKCdoaWRlJylcbiAgICAgICAgICBjb25zb2xlLmxvZygnbm9wIG5leHQnKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlkZW9fcHJldi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCAoKT0+e1xuICAgICAgICBpZih0aGlzLnZpZGVvX2luZGV4IDwgdGhpcy5wbGF5bGlzdF9pdGVtcy5sZW5ndGggLSAxKXtcbiAgICAgICAgICB0aGlzLnZpZGVvX2luZGV4KytcbiAgICAgICAgICB0aGlzLnNlbGVjdFZpZGVvKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgdGhpcy5pbml0UGxheWxpc3QoKVxuICAgIH1cbiAgICBcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCk9PntcbiAgICAgIHRoaXMucGxheWxpc3RfaXRlbV93aWR0aCA9IHRoaXMucGxheWxpc3RfaXRlbXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAyMFxuICAgICAgaWYodGhpcy5wbGF5bGlzdCl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXNpemUnKVxuICAgICAgICB0aGlzLmluaXRQbGF5bGlzdCgpXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgICB0aGlzLmluaXQoKVxuICAgIFxuICB9XG4gIFxuICAvLyBpbml0IG5ldyB2aWRlb1xuICBpbml0KCl7XG4gICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgncGxheWluZycpXG4gICAgdGhpcy5lZmZlY3RfcGF1c2UuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICB0aGlzLmVmZmVjdF9wbGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRkYXRhJywgKCkgPT57XG4gICAgICB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID0gLjQ1XG4gICAgICB0aGlzLnRpbWVfZHVyYXRpb24udGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdFRpbWUodGhpcy52aWRlby5kdXJhdGlvbilcbiAgICAgIHRoaXMudGltZV9jdXJyZW50LnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXRUaW1lKHRoaXMudmlkZW8uY3VycmVudFRpbWUpXG4gICAgICBcbiAgICAgIHRoaXMudGltZV9zZWVrX2Jhcl9maWxsLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVgoMCknXG4gICAgfSlcbiAgfVxuICBcbiAgaW5pdFBsYXlsaXN0KCl7XG4gICAgbGV0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGhcbiAgICBpZih3aWR0aCA8IDQyNSl7XG4gICAgICB0aGlzLnBsYXlsaXN0X3NpemUgPSAxXG4gICAgfVxuICAgIGVsc2UgaWYod2lkdGggPCA2NTApe1xuICAgICAgdGhpcy5wbGF5bGlzdF9zaXplID0gMlxuICAgIH1cbiAgICBlbHNlIGlmKHdpZHRoIDwgOTAwKXtcbiAgICAgIHRoaXMucGxheWxpc3Rfc2l6ZSA9IDNcbiAgICB9XG4gICAgZWxzZSBpZih3aWR0aCA8IDEzMDApe1xuICAgICAgdGhpcy5wbGF5bGlzdF9zaXplID0gNVxuICAgIH1cbiAgICBlbHNlIGlmKHdpZHRoIDwgMjUwMCl7XG4gICAgICB0aGlzLnBsYXlsaXN0X3NpemUgPSA2XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICB0aGlzLnBsYXlsaXN0X3NpemUgPSA5XG4gICAgfVxuICAgIFxuICAgIHRoaXMucGxheWxpc3RfaW5kZXggPSAwXG4gICAgdGhpcy51cGRhdGVQbGF5bGlzdCgpXG4gIH1cbiAgXG4gIFxuICAvL3VwZGF0ZSBmdW5jXG4gIHRvZ2dsZVN0YXRlKCl7XG4gICAgaWYodGhpcy52aWRlby5wYXVzZWQpe1xuICAgICAgdGhpcy52aWRlby5wbGF5KClcbiAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3BsYXlpbmcnKVxuICAgICAgdGhpcy5yZW5kZXIoKVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgdGhpcy52aWRlby5wYXVzZSgpXG4gICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdwbGF5aW5nJylcbiAgICB9XG4gICAgdGhpcy5lZmZlY3RfcGF1c2UuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICB0aGlzLmVmZmVjdF9wbGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gIH1cbiAgXG4gIHVwZGF0ZVRpbWUoZSl7XG4gICAgbGV0IHJhdGlvID0gKGUucGFnZVggLSB0aGlzLnRpbWVfcG9zaXRpb25zLmxlZnQpIC8gdGhpcy50aW1lX3Bvc2l0aW9ucy53aWR0aFxuICAgIGlmKHJhdGlvID49IDAgJiYgcmF0aW8gPCAxKXtcbiAgICAgIHRoaXMudGltZV9zZWVrX2Jhcl9maWxsLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVgoJysgcmF0aW8gKycpJ1xuICAgICAgdGhpcy52aWRlby5jdXJyZW50VGltZSA9IHJhdGlvICogdGhpcy52aWRlby5kdXJhdGlvblxuICAgICAgdGhpcy50aW1lX2N1cnJlbnQudGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdFRpbWUodGhpcy52aWRlby5jdXJyZW50VGltZSlcbiAgICB9XG4gIH1cbiAgXG4gIHVwZGF0ZVZvbHVtZShlKXtcbiAgICBsZXQgcmF0aW8gPSAoZS5wYWdlWCAtIHRoaXMudm9sdW1lX3Bvc2l0aW9ucy5sZWZ0KSAvIHRoaXMudm9sdW1lX3Bvc2l0aW9ucy53aWR0aFxuICAgIGlmKHJhdGlvID49IDAgJiYgcmF0aW8gPCAxKXtcbiAgICAgIHRoaXMudmlkZW8udm9sdW1lID0gcmF0aW9cbiAgICAgIHRoaXMudm9sdW1lX3NlZWtfYmFyX2ZpbGwuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlWCgnKyByYXRpbyArJyknXG4gICAgICBpZih0aGlzLnZpZGVvLm11dGVkKXtcbiAgICAgICAgdGhpcy50b2dnbGVNdXRlKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYocmF0aW8gPj0gLjUpe1xuICAgICAgICB0aGlzLmJ1dHRvbl92b2x1bWUuY2xhc3NMaXN0LmFkZCgndm9sdW1lLTInKVxuICAgICAgICB0aGlzLmJ1dHRvbl92b2x1bWUuY2xhc3NMaXN0LnJlbW92ZSgndm9sdW1lLTEnKVxuICAgICAgICB0aGlzLmJ1dHRvbl92b2x1bWUuY2xhc3NMaXN0LnJlbW92ZSgndm9sdW1lLTAnKVxuICAgICAgfVxuICAgICAgZWxzZSBpZihyYXRpbyA8IC41ICYmIHJhdGlvID49IC4yNSl7XG4gICAgICAgIHRoaXMuYnV0dG9uX3ZvbHVtZS5jbGFzc0xpc3QucmVtb3ZlKCd2b2x1bWUtMicpXG4gICAgICAgIHRoaXMuYnV0dG9uX3ZvbHVtZS5jbGFzc0xpc3QuYWRkKCd2b2x1bWUtMScpXG4gICAgICAgIHRoaXMuYnV0dG9uX3ZvbHVtZS5jbGFzc0xpc3QucmVtb3ZlKCd2b2x1bWUtMCcpXG4gICAgICB9XG4gICAgICBlbHNlIGlmKHJhdGlvIDwgLjI1KXtcbiAgICAgICAgdGhpcy5idXR0b25fdm9sdW1lLmNsYXNzTGlzdC5yZW1vdmUoJ3ZvbHVtZS0yJylcbiAgICAgICAgdGhpcy5idXR0b25fdm9sdW1lLmNsYXNzTGlzdC5yZW1vdmUoJ3ZvbHVtZS0xJylcbiAgICAgICAgdGhpcy5idXR0b25fdm9sdW1lLmNsYXNzTGlzdC5hZGQoJ3ZvbHVtZS0wJylcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYocmF0aW8gPD0gMCl7XG4gICAgICAgIHRoaXMuYnV0dG9uX3ZvbHVtZS5jbGFzc0xpc3QucmVtb3ZlKCd2b2x1bWUtMicpXG4gICAgICAgIHRoaXMuYnV0dG9uX3ZvbHVtZS5jbGFzc0xpc3QucmVtb3ZlKCd2b2x1bWUtMScpXG4gICAgICAgIHRoaXMuYnV0dG9uX3ZvbHVtZS5jbGFzc0xpc3QucmVtb3ZlKCd2b2x1bWUtMCcpXG4gICAgICAgIHRoaXMudG9nZ2xlTXV0ZSgpXG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICB0b2dnbGVNdXRlKCl7XG4gICAgaWYodGhpcy52aWRlby5tdXRlZCl7XG4gICAgICB0aGlzLnZpZGVvLm11dGVkID0gZmFsc2VcbiAgICAgIHRoaXMuYnV0dG9uX3ZvbHVtZS5jbGFzc0xpc3QucmVtb3ZlKCdtdXRlJylcbiAgICAgIHRoaXMudm9sdW1lX3NlZWtfYmFyX2ZpbGwuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlWCgnKyB0aGlzLnZpZGVvLnZvbHVtZSArJyknXG4gICAgfVxuICAgIGVsc2V7XG4gICAgICB0aGlzLnZpZGVvLm11dGVkID0gdHJ1ZVxuICAgICAgdGhpcy5idXR0b25fdm9sdW1lLmNsYXNzTGlzdC5hZGQoJ211dGUnKVxuICAgICAgdGhpcy52b2x1bWVfc2Vla19iYXJfZmlsbC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVYKDApJ1xuICAgIH1cbiAgfVxuICBcbiAgdG9nZ2xlRnVsbHNjcmVlbigpe1xuICAgIGlmKGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50ID09IG51bGwgJiYgZG9jdW1lbnQubW96RnVsbHNjcmVlbkVsZW1lbnQgPT0gbnVsbCAmJiBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudCA9PSBudWxsICYmIGRvY3VtZW50Lm1zRnVsbHNjcmVlbkVsZW1lbnQ9PSBudWxsICl7XG4gICAgICBpZih0aGlzLmNvbnRhaW5lci5yZXF1ZXN0RnVsbHNjcmVlbil7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnJlcXVlc3RGdWxsc2NyZWVuKClcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYodGhpcy5jb250YWluZXIubW96UmVxdWVzdEZ1bGxTY3JlZW4pe1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5tb3pSZXF1ZXN0RnVsbFNjcmVlbigpXG4gICAgICB9XG4gICAgICBlbHNlIGlmKHRoaXMuY29udGFpbmVyLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKXtcbiAgICAgICAgdGhpcy5jb250YWluZXIud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKVxuICAgICAgfVxuICAgICAgZWxzZSBpZih0aGlzLmNvbnRhaW5lci5tc1JlcXVlc3RGdWxsc2NyZWVuKXtcbiAgICAgICAgdGhpcy5jb250YWluZXIubXNSZXF1ZXN0RnVsbHNjcmVlbigpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICBpZihkb2N1bWVudC5leGl0RnVsbHNjcmVlbil7XG4gICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKClcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYoZG9jdW1lbnQubW96RXhpdEZ1bGxTY3JlZW4pe1xuICAgICAgICBkb2N1bWVudC5tb3pFeGl0RnVsbFNjcmVlbigpXG4gICAgICB9XG4gICAgICBlbHNlIGlmKGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKXtcbiAgICAgICAgZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4oKVxuICAgICAgfVxuICAgICAgZWxzZSBpZihkb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuKXtcbiAgICAgICAgZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbigpXG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAvL3BsYXlsaXN0XG4gIHVwZGF0ZVBsYXlsaXN0KCl7XG4gICAgdGhpcy5jb250YWluZXJfcGxheWxpc3Quc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoLScrICh0aGlzLnBsYXlsaXN0X2luZGV4ICogdGhpcy5wbGF5bGlzdF9pdGVtX3dpZHRoKSArJ3B4KSdcbiAgICBcbiAgICBpZih0aGlzLnBsYXlsaXN0X2luZGV4ID09IDApe1xuICAgICAgdGhpcy5wbGF5bGlzdF9wcmV2LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgdGhpcy5wbGF5bGlzdF9wcmV2LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxuICAgIH1cbiAgICBcbiAgICBpZih0aGlzLnBsYXlsaXN0X2luZGV4ICA+PSAodGhpcy5wbGF5bGlzdF9pdGVtcy5sZW5ndGggLSB0aGlzLnBsYXlsaXN0X3NpemUpKXtcbiAgICAgIHRoaXMucGxheWxpc3RfbmV4dC5jbGFzc0xpc3QuYWRkKCdoaWRlJylcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHRoaXMucGxheWxpc3RfbmV4dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcbiAgICB9XG4gIH1cbiAgXG4gIHNlbGVjdFZpZGVvKCl7XG4gICAgdGhpcy5wbGF5bGlzdF9zZWxlY3RlZC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgIHRoaXMucGxheWxpc3Rfc2VsZWN0ZWQgPSB0aGlzLnBsYXlsaXN0X2l0ZW1zW3RoaXMudmlkZW9faW5kZXhdXG4gICAgdGhpcy5wbGF5bGlzdF9zZWxlY3RlZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgIFxuICAgIHRoaXMudmlkZW8uc3JjID0gdGhpcy5wbGF5bGlzdF9zZWxlY3RlZC5kYXRhc2V0LnRhcmdldFxuICAgIHRoaXMuaW5pdCgpXG4gICAgXG4gICAgaWYodGhpcy52aWRlb19pbmRleCA+IHRoaXMucGxheWxpc3RfaW5kZXggKyB0aGlzLnBsYXlsaXN0X3NpemUgLSAxKXtcbiAgICAgIHRoaXMucGxheWxpc3RfaW5kZXgrK1xuICAgICAgdGhpcy51cGRhdGVQbGF5bGlzdCgpXG4gICAgfVxuICAgIGVsc2UgaWYodGhpcy52aWRlb19pbmRleCA8IHRoaXMucGxheWxpc3RfaW5kZXgpe1xuICAgICAgdGhpcy5wbGF5bGlzdF9pbmRleC0tXG4gICAgICB0aGlzLnVwZGF0ZVBsYXlsaXN0KClcbiAgICB9XG4gICAgXG4gICAgaWYodGhpcy52aWRlb19pbmRleCA9PSAwKXtcbiAgICAgIHRoaXMudmlkZW9fcHJldi5jbGFzc0xpc3QuYWRkKCdoaWRlJylcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHRoaXMudmlkZW9fcHJldi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcbiAgICB9XG4gICAgXG4gICAgaWYodGhpcy52aWRlb19pbmRleCAgPj0gKHRoaXMucGxheWxpc3RfaXRlbXMubGVuZ3RoIC0gMSkpe1xuICAgICAgdGhpcy52aWRlb19uZXh0LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgdGhpcy52aWRlb19uZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxuICAgIH1cbiAgfVxuICBcbiAgXG4gIFxuICAvL3JlbmRlciBmdW5jXG4gIHJlbmRlcigpe1xuICAgIGlmKCF0aGlzLnZpZGVvLnBhdXNlZCl7XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMucmVuZGVyLmJpbmQodGhpcykpXG4gICAgfVxuICAgIFxuICAgIGxldCByYXRpbyA9IHRoaXMudmlkZW8uY3VycmVudFRpbWUgLyB0aGlzLnZpZGVvLmR1cmF0aW9uXG4gICAgdGhpcy50aW1lX3NlZWtfYmFyX2ZpbGwuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlWCgnKyByYXRpbyArJyknXG4gICAgXG4gICAgdGhpcy50aW1lX2N1cnJlbnQudGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdFRpbWUodGhpcy52aWRlby5jdXJyZW50VGltZSlcbiAgICBcbiAgICBpZih0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID09IHRoaXMudmlkZW8uZHVyYXRpb24pe1xuICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgncGxheWluZycpXG4gICAgfVxuICB9XG4gIFxuICBcbiAgLy8gdXNlZnVsbCBmdW5jXG4gIGZvcm1hdFRpbWUodGltZSl7XG4gICAgdGltZSAgPSBNYXRoLnJvdW5kKHRpbWUpXG4gICAgbGV0IGhvdXJzICAgPSBNYXRoLmZsb29yKHRpbWUgLyAzNjAwKTtcbiAgICBsZXQgbWludXRlcyA9IE1hdGguZmxvb3IoKHRpbWUgLSAoaG91cnMgKiAzNjAwKSkgLyA2MCk7XG4gICAgbGV0IHNlY29uZHMgPSB0aW1lIC0gKGhvdXJzICogMzYwMCkgLSAobWludXRlcyAqIDYwKTtcbiAgICBcbiAgICBob3VycyAgID0gaG91cnMgICA8IDEwID8gXCIwXCIraG91cnMgOiBob3Vyc1xuICAgIG1pbnV0ZXMgPSBtaW51dGVzIDwgMTAgPyBcIjBcIittaW51dGVzIDogbWludXRlc1xuICAgIHNlY29uZHMgPSBzZWNvbmRzIDwgMTAgPyBcIjBcIitzZWNvbmRzIDogc2Vjb25kc1xuICAgIFxuICAgIGlmKGhvdXJzICE9IDApe1xuICAgICAgcmV0dXJuIGhvdXJzKyc6JyttaW51dGVzKyc6JytzZWNvbmRzXG4gICAgfVxuICAgIGVsc2V7XG4gICAgICByZXR1cm4gbWludXRlcysnOicrc2Vjb25kc1xuICAgIH1cbiAgfVxufSIsImNsYXNzIFNsaWRlcntcbiAgY29uc3RydWN0b3IoY29udGFpbmVyKXtcbiAgICB0aGlzLmNvbnRhaW5lciAgID0gY29udGFpbmVyXG4gICAgdGhpcy5pdGVtcyAgICAgICA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItaXRlbScpXG4gICAgdGhpcy5idXR0b25fbmV4dCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItbmV4dCcpXG4gICAgdGhpcy5idXR0b25fcHJldiA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItcHJldicpXG4gICAgdGhpcy50aW1lcl9maWxsICA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItdGltZXItZmlsbCcpXG4gICAgdGhpcy50ZXh0X2N1cnJlbnQgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWluZGV4LWN1cnJlbnQnKVxuICAgIHRoaXMudGV4dF90b3RhbCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXItaW5kZXgtdG90YWwnKVxuICAgIFxuICAgIHRoaXMuaW5kZXggICAgICA9IDBcbiAgICB0aGlzLnN0YWNraW5nICAgPSAxXG4gICAgdGhpcy5sYXN0X2luZGV4ID0gMFxuICAgIFxuICAgIHRoaXMuc2xpZGVfaW50ZXJ2YWwgPSA0MDAwXG4gICAgdGhpcy5sYXN0X3VwZGF0ZSAgICA9IDBcbiAgICB0aGlzLm5lZWRfdXBkYXRlICAgID0gdHJ1ZVxuICAgIHRoaXMuZHJhdyAgICAgICAgICAgPSB0cnVlXG4gICAgXG4gICAgdGhpcy5pbml0KClcbiAgICB0aGlzLnJlbmRlcigpXG4gICAgdGhpcy5zdGFydEludGVydmFsKClcbiAgICBcbiAgICB0aGlzLmJ1dHRvbl9uZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcbiAgICAgIGlmKCF0aGlzLmNsaWNrZWQpe1xuICAgICAgICBpZih0aGlzLmluZGV4IDwgdGhpcy5pdGVtcy5sZW5ndGggLSAxKXtcbiAgICAgICAgICB0aGlzLmluZGV4ICsrXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICB0aGlzLmluZGV4ID0gMFxuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlKClcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIHRoaXMuYnV0dG9uX3ByZXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xuICAgICAgaWYoIXRoaXMuY2xpY2tlZCl7XG4gICAgICAgIGlmKHRoaXMuaW5kZXggPiAwKXtcbiAgICAgICAgICB0aGlzLmluZGV4IC0tXG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICB0aGlzLmluZGV4ID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGUoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgXG4gIHN0YXJ0SW50ZXJ2YWwoKXtcbiAgICB0aGlzLmludGVydmFsID0gc2V0VGltZW91dCgoKT0+e1xuICAgICAgXG4gICAgICB0aGlzLmJ1dHRvbl9uZXh0LmNsaWNrKClcbiAgICAgIHRoaXMuc3RhcnRJbnRlcnZhbCgpXG4gICAgfSwgdGhpcy5zbGlkZV9pbnRlcnZhbClcbiAgfVxuICBcbiAgaW5pdCgpe1xuICAgIHRoaXMudGV4dF90b3RhbC50ZXh0Q29udGVudCA9IHRoaXMuaXRlbXMubGVuZ3RoID4gOSA/IHRoaXMuaXRlbXMubGVuZ3RoIDogJzAnICsgdGhpcy5pdGVtcy5sZW5ndGhcbiAgICB0aGlzLmluZGV4ID0gMFxuICAgIHRoaXMuaXRlbXNbdGhpcy5pbmRleF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICB0aGlzLnRleHRfY3VycmVudC50ZXh0Q29udGVudCA9ICh0aGlzLmluZGV4KzEpID4gOSA/ICh0aGlzLmluZGV4KzEpIDogJzAnICsgKHRoaXMuaW5kZXgrMSlcbiAgfVxuICBcbiAgdXBkYXRlKCl7XG4gICAgdGhpcy50ZXh0X3RvdGFsLnRleHRDb250ZW50ID0gdGhpcy5pdGVtcy5sZW5ndGggPiA5ID8gdGhpcy5pdGVtcy5sZW5ndGggOiAnMCcgKyB0aGlzLml0ZW1zLmxlbmd0aFxuICAgIHRoaXMudGV4dF9jdXJyZW50LnRleHRDb250ZW50ID0gKHRoaXMuaW5kZXgrMSkgPiA5ID8gKHRoaXMuaW5kZXgrMSkgOiAnMCcgKyAodGhpcy5pbmRleCsxKVxuICAgIFxuICAgIHRoaXMuaXRlbXNbdGhpcy5pbmRleF0uc3R5bGUuekluZGV4ID0gdGhpcy5zdGFja2luZysrXG4gICAgXG4gICAgLy8gdGhpcy5pdGVtc1t0aGlzLmluZGV4XS5jbGFzc0xpc3QuYWRkKCd1cC1pbmRleCcpXG4gICAgLy8gdGhpcy5pdGVtc1t0aGlzLmxhc3RfaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ3VwLWluZGV4JylcbiAgICB0aGlzLml0ZW1zW3RoaXMuaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgXG4gICAgdGhpcy5jbGlja2VkID0gdHJ1ZVxuICAgIHRoaXMuZHJhdyAgICA9IGZhbHNlXG4gICAgdGhpcy50aW1lcl9maWxsLmNsYXNzTGlzdC5hZGQoJ2ZpbGwnKVxuICAgIFxuICAgIFxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtc1t0aGlzLmxhc3RfaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICB0aGlzLmxhc3RfaW5kZXggPSB0aGlzLmluZGV4XG4gICAgICB0aGlzLmNsaWNrZWQgPSBmYWxzZVxuICAgICAgXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5pbnRlcnZhbClcbiAgICAgIHRoaXMuc3RhcnRJbnRlcnZhbCgpXG4gICAgICBcbiAgICAgIHRoaXMudGltZXJfZmlsbC5jbGFzc0xpc3QucmVtb3ZlKCdmaWxsJylcbiAgICAgIHRoaXMubmVlZF91cGRhdGUgPSB0cnVlXG4gICAgICB0aGlzLmRyYXcgICAgICAgID0gdHJ1ZVxuICAgIH0sIDYxMClcbiAgICBcbiAgfVxuICBcbiAgcmVuZGVyKHRpbWUpe1xuICAgIC8vIGNvbnNvbGUubG9nKHRpbWUpXG4gICAgaWYodGhpcy5uZWVkX3VwZGF0ZSB8fCB0aGlzLmxhc3RfdXBkYXRlID09PSB1bmRlZmluZWQgfHwgdGltZSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgIHRoaXMubGFzdF91cGRhdGUgPSB0aW1lXG4gICAgICB0aGlzLm5lZWRfdXBkYXRlID0gZmFsc2VcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2codGltZSAtIHRoaXMubGFzdF91cGRhdGUgLyB0aGlzLmR1cmF0aW9uKVxuICAgIGlmKCh0aW1lIC0gdGhpcy5sYXN0X3VwZGF0ZSkgLyB0aGlzLnNsaWRlX2ludGVydmFsID49IDEpe1xuICAgICAgbGV0IHJhdGlvID0gKHRpbWUgLSB0aGlzLmxhc3RfdXBkYXRlKSAvIHRoaXMuc2xpZGVfaW50ZXJ2YWxcbiAgICAgIHRoaXMudGltZXJfZmlsbC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVYKCcrIHJhdGlvICsnKSdcbiAgICAgIHRoaXMubGFzdF91cGRhdGUgPSB0aW1lXG4gICAgfVxuICAgIFxuICAgIGlmKHRoaXMuZHJhdyl7XG4gICAgICBsZXQgcmF0aW8gPSAodGltZSAtIHRoaXMubGFzdF91cGRhdGUpIC8gdGhpcy5zbGlkZV9pbnRlcnZhbFxuICAgICAgdGhpcy50aW1lcl9maWxsLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVgoJysgcmF0aW8gKycpJ1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgdGhpcy50aW1lcl9maWxsLnN0eWxlLnRyYW5zZm9ybSA9IG51bGxcbiAgICB9XG4gICAgXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlci5iaW5kKHRoaXMpKVxuICB9XG4gIFxufSIsIi8vIEhFQURFUiBCVVJHRVJcbmNvbnN0IGJ1cmdlcl9idXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLWJ1cmdlcicpXG5jb25zdCBidXJnZXJfbmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci1uYXYnKVxuXG5idXJnZXJfYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBidXJnZXJfYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlci1idXJnZXItYWN0aXZlJylcbiAgYnVyZ2VyX25hdi5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItbmF2LWV4cGFuZCcpXG59KVxuXG5jb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJylcbnZhciBoZWFkZXJfaGlkZSA9IGZhbHNlXG5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBmdW5jdGlvbiAoZSkge1xuICBpZiAoIWhlYWRlcl9oaWRlICYmIGUuZGVsdGFZIDwgMCAmJiAhc2Nyb2xsX2Rpc2FibGVkKSB7XG4gICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxuICAgIGhlYWRlcl9oaWRlID0gdHJ1ZVxuICB9XG4gIGVsc2UgaWYgKGhlYWRlcl9oaWRlICYmIGUuZGVsdGFZID4gMCAmJiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA+IDgwICYmICFzY3JvbGxfZGlzYWJsZWQpIHtcbiAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZCgnaGlkZScpXG4gICAgaGVhZGVyX2hpZGUgPSBmYWxzZVxuICB9XG59KVxuLy8gU0NST0xMIERJU0FCTEVcbmNvbnN0IGRpc2FibGVkX2VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNjcm9sbC1kaXNhYmxlJylcbnZhciBzY3JvbGxfZGlzYWJsZWQgPSBmYWxzZVxuZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNhYmxlZF9lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICBkaXNhYmxlZF9lbGVtZW50c1tpXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgIHNjcm9sbF9kaXNhYmxlZCA9IHRydWVcbiAgfSlcbiAgZGlzYWJsZWRfZWxlbWVudHNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICBzY3JvbGxfZGlzYWJsZWQgPSBmYWxzZVxuICB9KVxufVxuXG4vLyBFWEhJQklUSU9OUyBTTElERVJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1leGhpYml0aW9ucycpICE9IHVuZGVmaW5lZCkge1xuICBjb25zdCBleGhpYml0aW9uc19idXR0b25zX2l0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbi1leGhpYml0aW9ucy1jb250YWluZXItc2xpZGVyLW5hdi1saXN0LS1pdGVtJylcbiAgY29uc3QgZXhoaWJpdGlvbnNfYnV0dG9uc19jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1leGhpYml0aW9ucy1jb250YWluZXItc2xpZGVyLW5hdi1saXN0JylcbiAgY29uc3QgZXhoaWJpdGlvbnNfbGlzdF9pbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi1leGhpYml0aW9ucy1jb250YWluZXItc2xpZGVyLXdyYXBwZXItbGlzdCcpXG4gIGNvbnN0IGV4aGliaXRpb25zX2xpc3RfY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLWV4aGliaXRpb25zLWNvbnRhaW5lci1jb250ZW50LXdyYXBwZXItbGlzdCcpXG4gIGxldCBleGhpYml0aW9uc19sYXN0X2luZGV4ID0gMFxuICBcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGhpYml0aW9uc19idXR0b25zX2l0ZW0ubGVuZ3RoOyBpKyspIHtcbiAgICBleGhpYml0aW9uc19idXR0b25zX2l0ZW1baV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgaW5kZXggPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGV4aGliaXRpb25zX2J1dHRvbnNfaXRlbSwgdGhpcylcbiAgICAgIFxuICAgICAgaWYgKGV4aGliaXRpb25zX2J1dHRvbnNfaXRlbVtleGhpYml0aW9uc19sYXN0X2luZGV4XSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgZXhoaWJpdGlvbnNfYnV0dG9uc19pdGVtW2V4aGliaXRpb25zX2xhc3RfaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG4gICAgICB9XG4gICAgICBleGhpYml0aW9uc19sYXN0X2luZGV4ID0gaW5kZXhcbiAgICAgIFxuICAgICAgZXhoaWJpdGlvbnNfYnV0dG9uc19pdGVtW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgICAgXG4gICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gOTAwKSB7XG4gICAgICAgIGV4aGliaXRpb25zX2xpc3RfaW1nLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC0nICsgKGluZGV4ICogMTAwKSArICclKSdcbiAgICAgICAgZXhoaWJpdGlvbnNfbGlzdF9jb250ZW50LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC0nICsgKGluZGV4ICogMTAwKSArICclKSdcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBleGhpYml0aW9uc19saXN0X2ltZy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgtJyArIChpbmRleCAqIDEwMCkgKyAnJSknXG4gICAgICAgIGV4aGliaXRpb25zX2xpc3RfY29udGVudC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgtJyArIChpbmRleCAqIDEwMCkgKyAnJSknXG4gICAgICAgIGV4aGliaXRpb25zX2J1dHRvbnNfY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC0nICsgKCgoaW5kZXggLSAxKSAvIDMpICogMTAwKSArICclKSdcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG5cbi8vIEhPTUUgUExBWUVSKVxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLXZpZGVvcy13cmFwcGVyJykgIT0gdW5kZWZpbmVkKSB7XG4gIGNvbnN0IHBsYXllciA9IG5ldyBQbGF5ZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlY3Rpb24tdmlkZW9zLXdyYXBwZXInKSwgdHJ1ZSlcbn1cblxuLy8gU0xJREVSXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpICE9IHVuZGVmaW5lZCkge1xuICBjb25zdCBzbGlkZXIgPSBuZXcgU2xpZGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXInKSlcbn1cblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnN0YWdyYW1EYXRlJykgIT0gdW5kZWZpbmVkKSB7XG4gIGxldCBpbnN0YWdyYW1EYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luc3RhZ3JhbURhdGUnKVxuICBjb25zdCBkID0gaW5zdGFncmFtRGF0ZS5nZXRBdHRyaWJ1dGUoJ2RhdGV0aW1lJylcbiAgaW5zdGFncmFtRGF0ZS5pbm5lclRleHQgPSBtb21lbnQoZCkuZm9ybWF0KCdERCBNTU1NIFlZWVknKVxufVxubmV3IEV4aGliaXRpb25zKClcbm5ldyBOZXdzKClcbiJdfQ==
